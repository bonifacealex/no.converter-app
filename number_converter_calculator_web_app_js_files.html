--- FILE: index.html ---
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Number Converter + Calculator</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app" id="app">
    <header>
      <h1>ðŸ”¢ Number Converter + Calculator</h1>
      <div class="controls">
        <button id="darkToggle" aria-pressed="false">ðŸŒ™ Dark</button>
      </div>
    </header>

    <main>
      <section class="converter card">
        <h2>Number Conversion</h2>
        <label>Enter number
          <input id="numInput" inputmode="text" placeholder="e.g. 255 or 11111111" />
        </label>
        <label>Select base
          <select id="baseSelect">
            <option value="decimal">Decimal</option>
            <option value="binary">Binary</option>
            <option value="octal">Octal</option>
            <option value="hex">Hexadecimal</option>
          </select>
        </label>
        <div class="row">
          <button id="convertBtn">Convert</button>
          <button id="copyConvBtn">Copy Result</button>
        </div>

        <pre id="convResult" class="result" aria-live="polite"></pre>
        <details>
          <summary>Conversion history</summary>
          <ul id="convHistory"></ul>
        </details>
      </section>

      <section class="calculator card">
        <h2>Calculator</h2>
        <div class="calc-display">
          <input id="calcDisplay" readonly />
        </div>
        <div class="calc-keys" id="calcKeys"></div>
        <div class="row">
          <button id="copyCalcBtn">Copy Result</button>
          <button id="clearAllBtn">Clear</button>
        </div>
        <details>
          <summary>Calculator history</summary>
          <ul id="calcHistory"></ul>
        </details>
      </section>
    </main>

    <footer>Offline Web App â€¢ Open-source</footer>
  </div>

  <script src="app.js"></script>
</body>
</html>

--- FILE: styles.css ---
:root{
  --bg:#f5f7fb; --card:#fff; --text:#111; --muted:#666; --accent:#2b8cff; --danger:#e74c3c;
}
[data-theme='dark']{
  --bg:#0f1720; --card:#0b1220; --text:#e6eef8; --muted:#9fb0c8; --accent:#58a6ff; --danger:#ff6b6b;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;background:var(--bg);color:var(--text)}
.app{max-width:900px;margin:20px auto;padding:16px}
header{display:flex;justify-content:space-between;align-items:center}
h1{margin:0;font-size:20px}
.controls button{padding:8px 10px;border-radius:8px;border:0;background:none;cursor:pointer}
main{display:grid;grid-template-columns:1fr;gap:16px;margin-top:12px}
.card{background:var(--card);padding:14px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.06)}
label{display:block;margin-bottom:8px;font-size:13px}
input,select{width:100%;padding:8px;border-radius:8px;border:1px solid #d9e2ef;margin-top:6px}
.result{background:#11112811;padding:10px;border-radius:8px;min-height:60px}
.row{display:flex;gap:8px;margin-top:10px}
button{padding:10px 12px;border-radius:8px;border:0;background:var(--accent);color:#fff;cursor:pointer}
button[aria-pressed='true']{opacity:.9}
.calc-display input{width:100%;padding:12px;border-radius:8px;border:1px solid #cfd8e3;font-size:18px}
.calc-keys{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px}
.calc-keys button{padding:14px;font-size:16px;background:#f0f4ff;color:var(--text);border-radius:8px}
footer{text-align:center;margin-top:18px;color:var(--muted);font-size:13px}

--- FILE: app.js ---
// Simple, safe evaluator for calculator expressions
const safeEval = (expr) => {
  // allow digits, operators, parentheses, decimal point, spaces
  if (!/^[0-9+\-*/(). \n\r\t]+$/.test(expr)) throw new Error('Invalid characters');
  // block consecutive operators like ** or // which might be allowed but we keep simple
  return Function(`"use strict"; return (${expr})`)();
}

// Elements
const numInput = document.getElementById('numInput');
const baseSelect = document.getElementById('baseSelect');
const convertBtn = document.getElementById('convertBtn');
const convResult = document.getElementById('convResult');
const convHistory = document.getElementById('convHistory');
const copyConvBtn = document.getElementById('copyConvBtn');

const calcDisplay = document.getElementById('calcDisplay');
const calcKeys = document.getElementById('calcKeys');
const copyCalcBtn = document.getElementById('copyCalcBtn');
const clearAllBtn = document.getElementById('clearAllBtn');
const calcHistory = document.getElementById('calcHistory');

const darkToggle = document.getElementById('darkToggle');

// State (persisted to localStorage)
const STATE_KEY = 'nc_state_v1';
let state = JSON.parse(localStorage.getItem(STATE_KEY) || '{}');
state.convHistory = state.convHistory || [];
state.calcHistory = state.calcHistory || [];
state.theme = state.theme || 'light';

// Apply theme
const applyTheme = () => {
  document.documentElement.setAttribute('data-theme', state.theme === 'dark' ? 'dark' : 'light');
  darkToggle.textContent = state.theme === 'dark' ? 'â˜€ï¸ Light' : 'ðŸŒ™ Dark';
  darkToggle.setAttribute('aria-pressed', state.theme === 'dark');
}
applyTheme();

// Conversion helpers
function parseInputToInt(str, base){
  if(base==='decimal') return parseInt(str,10);
  if(base==='binary') return parseInt(str.replace(/\s+/g,''),2);
  if(base==='octal') return parseInt(str.replace(/\s+/g,''),8);
  if(base==='hex') return parseInt(str.replace(/\s+/g,''),16);
  return NaN;
}

function formatConversions(n){
  if(!Number.isFinite(n) || Number.isNaN(n)) return 'Invalid number';
  return `Decimal: ${n}\nBinary: ${n.toString(2)}\nOctal: ${n.toString(8)}\nHexadecimal: ${n.toString(16).toUpperCase()}`;
}

convertBtn.addEventListener('click', ()=>{
  try{
    const raw = numInput.value.trim();
    if(!raw) throw new Error('Enter a number');
    const base = baseSelect.value;
    const n = parseInputToInt(raw, base);
    if(Number.isNaN(n)) throw new Error('Cannot parse number for selected base');
    const out = formatConversions(n);
    convResult.textContent = out;
    // push to history
    const entry = {input: raw, base, out, time: new Date().toISOString()};
    state.convHistory.unshift(entry);
    state.convHistory = state.convHistory.slice(0,50);
    localStorage.setItem(STATE_KEY, JSON.stringify(state));
    renderHistories();
  }catch(err){
    convResult.textContent = 'Error: ' + (err.message||err);
  }
});

copyConvBtn.addEventListener('click', async ()=>{
  const text = convResult.textContent || '';
  try{ await navigator.clipboard.writeText(text); alert('Conversion copied'); }catch(e){ alert('Copy failed'); }
});

// Calculator keys
const keys = ['7','8','9','/','4','5','6','*','1','2','3','-','0','.','C','+','(',')','=','âŒ«'];
keys.forEach(k=>{
  const btn = document.createElement('button');
  btn.textContent = k;
  btn.addEventListener('click', ()=>onKeyPress(k));
  calcKeys.appendChild(btn);
});

function onKeyPress(k){
  if(k==='C'){ calcDisplay.value=''; return; }
  if(k==='âŒ«'){ calcDisplay.value = calcDisplay.value.slice(0,-1); return; }
  if(k==='='){ evaluateCalc(); return; }
  calcDisplay.value += k;
}

function evaluateCalc(){
  try{
    const expr = calcDisplay.value.trim();
    if(!expr) return;
    const res = safeEval(expr);
    calcDisplay.value = String(res);
    const entry = {expr, res, time: new Date().toISOString()};
    state.calcHistory.unshift(entry);
    state.calcHistory = state.calcHistory.slice(0,100);
    localStorage.setItem(STATE_KEY, JSON.stringify(state));
    renderHistories();
  }catch(err){
    alert('Invalid expression');
  }
}

copyCalcBtn.addEventListener('click', async ()=>{
  try{ await navigator.clipboard.writeText(calcDisplay.value||''); alert('Calculator result copied'); }catch(e){ alert('Copy failed'); }
});

clearAllBtn.addEventListener('click', ()=>{ calcDisplay.value=''; convResult.textContent=''; });

function renderHistories(){
  convHistory.innerHTML = '';
  state.convHistory.forEach(it=>{
    const li = document.createElement('li');
    li.textContent = `${new Date(it.time).toLocaleString()}: [${it.base}] ${it.input} â†’ ${it.out.split('\n')[0]}`;
    convHistory.appendChild(li);
  });

  calcHistory.innerHTML='';
  state.calcHistory.forEach(it=>{
    const li = document.createElement('li');
    li.textContent = `${new Date(it.time).toLocaleString()}: ${it.expr} = ${it.res}`;
    calcHistory.appendChild(li);
  });
}
renderHistories();

// Theme toggle
darkToggle.addEventListener('click', ()=>{
  state.theme = (state.theme==='dark')? 'light' : 'dark';
  localStorage.setItem(STATE_KEY, JSON.stringify(state));
  applyTheme();
});

// keyboard support: Enter to convert, Ctrl+Enter to evaluate calc
numInput.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ convertBtn.click(); } });
window.addEventListener('keydown',(e)=>{ if(e.ctrlKey && e.key==='Enter'){ evaluateCalc(); } });

--- FILE: README.md ---
# Number Converter + Calculator (Web)

A lightweight offline web app written in HTML/CSS/JavaScript. Features:
- Number conversion (decimal, binary, octal, hex)
- Button-driven calculator with safe evaluation
- Dark mode
- Copy result buttons
- Conversion & calculator history (localStorage)

## Files
- `index.html` â€” main page
- `styles.css` â€” style sheet
- `app.js` â€” app logic
- `README.md` â€” this file

## Run locally
1. Clone repo or download files.
2. Open `index.html` in a browser.
   - For best results serve via HTTP: `python -m http.server 8000` then open http://localhost:8000

## Publish on GitHub
1. Create a new GitHub repo.
2. `git init`, add files, `git add .`, commit, then `git push` to the repo.
3. Use GitHub Pages (Settings â†’ Pages) and set `main` branch to serve `index.html`.

## Optional: Build Windows .exe with Electron (quick outline)
1. Install Node.js & npm.
2. `npm init -y`
3. `npm install electron --save-dev`
4. Add a minimal `main.js` for Electron (serve `index.html`).
5. Use `electron-builder` or `electron-packager` to create an installer.

## Optional: Create Android APK using Capacitor
1. Install Node.js & npm.
2. `npm init` and install `@capacitor/core` and `@capacitor/cli`.
3. `npx cap init` then `npx cap add android` and `npx cap open android` to build in Android Studio.

--- FILE: package.json ---
{
  "name": "number-converter-calculator",
  "version": "1.0.0",
  "description": "Offline number converter + calculator web app",
  "main": "main.js",
  "scripts": {
    "start": "electron ."
  },
  "devDependencies": {
    "electron": "^25.0.0"
  }
}

--- FILE: main.js ---
// Minimal Electron main process
const { app, BrowserWindow } = require('electron')
const path = require('path')
function createWindow(){
  const w = new BrowserWindow({ width: 900, height: 800, webPreferences: { nodeIntegration: false, contextIsolation: true } })
  w.loadFile(path.join(__dirname,'index.html'))
}
app.whenReady().then(createWindow)
app.on('window-all-closed', ()=>{ if(process.platform!=='darwin') app.quit(); })

--- END OF FILES ---
